var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,o=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))u.call(a,l)&&r(e,l,a[l]);return e},d=(e,s)=>a(e,l(s));import{d as n,r as i,Y as c,J as v,c as b,M as p,G as _,C as m,y as w,L as f,b as h,g as y,w as g,z as M,h as x,i as C,q as T,j,t as k,E as O,m as V,F as $,ar as L,as as P}from"./index-Ddr6X_C9.js";import{u as F}from"./useTouch.n5Kz6Dv7.js";import{m as I,a as S,c as A,b as N,_ as E}from"./base64.DGXTDNor.js";const G=d(o({},N),{customMinClass:S(""),customMaxClass:S(""),hideMinMax:A(!1),hideLabel:A(!1),disabled:A(!1),inactiveColor:S("#e5e5e5"),activeColor:S(""),max:I(100),min:I(0),step:I(1),modelValue:{type:[Number,Array],default:0}}),q=E(n(d(o({},{name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:G,emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:a,emit:l}){const s=e,t=l,u=i(`sliderBarWrapperId${c()}`),r=F(),o=i(0),{proxy:d}=v(),n=i(0),I=i(0),S=b((()=>s.min)),A=b((()=>s.max)),N=b((()=>s.step<=0?(console.warn("[wot ui] warning(wd-slider): step must be greater than 0"),1):s.step)),E=i(0),G=i(R()),q=b((()=>p(G.value))),z=b((()=>A.value-S.value)),B=b((()=>q.value?G.value[0]:G.value)),D=b((()=>q.value?G.value[1]:0)),H=b((()=>`wd-slider ${s.hideLabel?"":"wd-slider__has-label"} ${s.disabled?"wd-slider--disabled":""} ${s.customClass}`)),J=b((()=>_({visibility:s.disabled?"hidden":"visible"}))),W=b((()=>{const e={};return s.inactiveColor&&(e.background=s.inactiveColor),_(e)})),X=b((()=>{const e={};if(0===z.value)return _(e);if(q.value){const[a,l]=U(G.value);e.width=100*(l-a)/z.value+"%",e.left=100*(a-S.value)/z.value+"%"}else e.width=100*(G.value-S.value)/z.value+"%",e.left="0";return s.activeColor&&(e.background=s.activeColor),_(e)}));function Y(){return s.disabled}function K(e,a,l){return Math.min(Math.max(e,a),l)}function Q(){f(`#${u.value}`,!1,d).then((e=>{n.value=Number(e.width),I.value=Number(e.left)}))}function R(){return p(s.modelValue)?U(s.modelValue):K(s.modelValue,S.value,A.value)}function U(e){if(!Array.isArray(e)||e.length<2)return console.warn("[wot ui] warning(wd-slider): range value should be an array with at least 2 elements"),[S.value,A.value];const a=K(e[0],S.value,A.value),l=K(e[1],S.value,A.value);return a>l?[l,a]:[a,l]}function Z(e){e=K(e,S.value,A.value);const a=Math.round((e-S.value)/N.value);return parseFloat((S.value+a*N.value).toFixed(10))}function ee(e,a){Y()||(o.value=a,r.touchStart(e),E.value=L(G.value),t("dragstart",{value:G.value}))}function ae(e){if(Y())return;r.touchMove(e);const a=r.deltaX.value/n.value*z.value;let l=L(E.value);p(l)?l[o.value]+=a:l+=a,function(e){let a=L(e);a=p(e)?U(e).map((e=>Z(e))):Z(e),P(a,G.value)||(G.value=a)}(l),t("dragmove",{value:G.value})}function le(){Y()||t("dragend",{value:G.value})}return m((()=>s.modelValue),(e=>{P(e,G.value)||(G.value=R())}),{deep:!0}),m(G,(e=>{t("update:modelValue",e)})),w((()=>{Q()})),a({initSlider:Q}),(e,a)=>{const l=C;return y(),h(l,{class:T(H.value),style:O(e.customStyle)},{default:g((()=>[e.hideMinMax?M("",!0):(y(),h(l,{key:0,class:T(`wd-slider__label-min ${e.customMinClass}`)},{default:g((()=>[j(k(S.value),1)])),_:1},8,["class"])),x(l,{class:"wd-slider__bar-wrapper",style:O(W.value),id:u.value},{default:g((()=>[x(l,{class:"wd-slider__bar",style:O(X.value)},{default:g((()=>[q.value?(y(),V($,{key:0},[x(l,{class:"wd-slider__button-wrapper wd-slider__button-wrapper--left",style:O(J.value),onTouchstart:a[0]||(a[0]=e=>ee(e,0)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(B.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"]),x(l,{class:"wd-slider__button-wrapper wd-slider__button-wrapper--right",style:O(J.value),onTouchstart:a[1]||(a[1]=e=>ee(e,1)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(D.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"])],64)):(y(),h(l,{key:1,class:"wd-slider__button-wrapper",style:O(J.value),onTouchstart:a[2]||(a[2]=e=>ee(e,0)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(B.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"]))])),_:1},8,["style"])])),_:1},8,["style","id"]),e.hideMinMax?M("",!0):(y(),h(l,{key:1,class:T(`wd-slider__label-max ${e.customMaxClass}`)},{default:g((()=>[j(k(A.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-2be6231e"]]);export{q as _};
