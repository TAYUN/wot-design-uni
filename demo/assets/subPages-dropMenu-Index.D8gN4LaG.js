var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,s=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&u(e,l,o[l]);if(a)for(var l of a(o))n.call(o,l)&&u(e,l,o[l]);return e},i=(e,a)=>o(e,l(a));import{u as d,_ as r}from"./wd-message-box.Car9cbHW.js";import{d as c,a3 as p,r as m,J as v,c as f,C as g,a6 as b,aa as w,b as _,z as h,g as y,w as V,h as x,D as $,i as k,m as j,F as C,n as z,q as K,k as S,j as O,t as T,E as I,ad as P,B as U,Y as N,Z as q,L as E,e as F,f as M,l as B,K as Q,u as A}from"./index-Ddr6X_C9.js";import{u as H,a as L,c as Y,_ as D}from"./wd-loading.CTKNgZO5.js";import{b as G,m as J,c as X,a as Z,n as R,f as W,w as ee,_ as oe}from"./base64.DGXTDNor.js";import{p as le,r as ae,c as te}from"./clickoutside.CJmLG0WC.js";import{q as ne,_ as ue}from"./page-wraper.CYTeNmK-.js";import{u as se}from"./useChildren.Ckm0hsG6.js";import{_ as ie}from"./demo-block.D-RAYQ1B.js";import{_ as de}from"./wd-slider.CB3m5ANE.js";import{_ as re}from"./wd-button.C_ePM_xj.js";import{w as ce}from"./wd-sort-button.Dw5vf4rF.js";import"./wd-input.Dh31V7z_.js";import"./useTranslate.zeM_cXdJ.js";import"./useTouch.n5Kz6Dv7.js";const pe=Symbol("wd-drop-menu"),me=i(s({},G),{zIndex:J(12),direction:Z("down"),modal:X(!0),closeOnClickModal:X(!0),duration:J(200)}),ve=i(s({},G),{customTitle:Z(""),customIcon:Z(""),modelValue:[String,Number],options:W(),disabled:X(!1),iconName:Z("check"),title:String,icon:Z("arrow-down"),iconSize:R,beforeToggle:Function,valueKey:Z("value"),labelKey:Z("label"),tipKey:Z("tip"),customPopupClass:Z(""),customPopupStyle:Z("")}),fe=oe(c(i(s({},{name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:ve,emits:["update:modelValue","change","open","opened","close","closed"],setup(e,{expose:o,emit:l}){const a=e,t=l,n=p(ne,null),u=m(!1),s=m(!1),i=m(),d=m(12),r=m(0),{parent:c}=H(pe),{proxy:N}=v(),q=f((()=>{let e="";return e=u.value&&c?"down"===c.props.direction?`top: calc(var(--window-top) + ${c.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${c.offset.value}px)`:"",e}));function E(){s.value&&(P(a.beforeToggle)?a.beforeToggle({status:!1,resolve:e=>{e&&F()}}):F())}function F(){s.value&&(s.value=!1)}function M(){s.value||(P(a.beforeToggle)?a.beforeToggle({status:!0,resolve:e=>{e&&B()}}):B())}function B(){u.value=!0,s.value=!0,c&&(r.value=Number(c.props.duration),i.value="down"===c.props.direction?"top":"bottom")}function Q(){u.value=!1,t("closed")}function A(){t("open")}function Y(){t("opened")}function D(){t("close")}return g((()=>a.modelValue),(e=>{U(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),b((()=>{n&&n.pushToQueue?n.pushToQueue(N):le(N)})),w((()=>{n&&n.removeFromQueue?n.removeFromQueue(N):ae(N)})),o({getShowPop:function(){return s.value},open:M,close:E,toggle:function(){s.value?E():M()}}),(e,o)=>{const l=S,n=k;return u.value?(y(),_(n,{key:0,class:K(`wd-drop-item  ${e.customClass}`),style:I(`pointer-events: none; z-index: ${d.value}; ${q.value};${e.customStyle}`)},{default:V((()=>[x(L,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),"z-index":d.value,duration:r.value,position:i.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,onBeforeEnter:A,onAfterEnter:Y,onBeforeLeave:D,onAfterLeave:Q},{default:V((()=>[e.options.length?(y(),_(n,{key:0},{default:V((()=>[(y(!0),j(C,null,z(e.options,((o,u)=>(y(),_(n,{key:u,onClick:e=>function(e){if(a.disabled)return;const{valueKey:o}=a,l=a.options[e],n=void 0!==l[o]?l[o]:l;t("update:modelValue",n),t("change",{value:n,selectedItem:l}),E()}(u),class:K("wd-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:V((()=>[x(n,{class:K(`wd-drop-item__title ${e.customTitle}`)},{default:V((()=>[x(l,null,{default:V((()=>[O(T(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(y(),_(l,{key:0,class:"wd-drop-item__tip"},{default:V((()=>[O(T(o[e.tipKey]),1)])),_:2},1024)):h("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(y(),_(ee,{key:0,name:e.iconName,"custom-class":`wd-drop-item__icon ${e.customIcon}`},null,8,["name","custom-class"])):h("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):$(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class"])])),_:3},8,["class","style"])):h("",!0)}}})),[["__scopeId","data-v-a0484388"]]),ge=oe(c(i(s({},{name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:me,setup(e){const o=e,l=p(ne,null),a=m(`dropMenuId${N()}`),t=m(0),n=m(0),u=f((()=>"down"===o.direction?`top: calc(var(--window-top) + ${t.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${t.value}px)`)),{proxy:s}=v(),{linkChildren:i,children:d}=se(pe),r=f((()=>d.some((e=>e.$.exposed.getShowPop())))),c=m(!1);let w;function S(){}function P(e){const{title:o,modelValue:l,options:a,valueKey:t,labelKey:n}=e;if(o)return o;for(let u=0,s=a.length;u<s;u++)if(l===a[u][t])return a[u][n];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function U(e){E(`#${a.value}`,!1,s).then((l=>{if(!l)return;const{top:a,bottom:u}=l;"down"===o.direction?t.value=Number(u):t.value=n.value-Number(a),e.$.exposed.toggle()}))}function A(){o.closeOnClickModal&&d.forEach((e=>{e.$.exposed.close()}))}return g(r,(e=>{w&&clearTimeout(w),e?c.value=!0:w=setTimeout((()=>{c.value=!1,w=null}),16)})),i({props:o,fold:U,offset:t}),g((()=>o.direction),(e=>{["up","down"].includes(e)||console.error("[wot ui] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),b((()=>{n.value=q().windowHeight})),(e,o)=>{const t=k,n=F(M("wd-icon"),ee);return y(),_(t,{style:I(e.customStyle),class:K(`wd-drop-menu ${e.customClass}`),onClick:Q(S,["stop","prevent"]),id:a.value},{default:V((()=>[e.modal?(y(),_(Y,{key:0,show:c.value,duration:e.duration,"z-index":12,"custom-style":u.value,onClick:A,onTouchmove:S},null,8,["show","duration","custom-style"])):h("",!0),x(t,{class:"wd-drop-menu__list"},{default:V((()=>[(y(!0),j(C,null,z(B(d),((e,o)=>(y(),_(t,{key:o,onClick:o=>function(e){e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):te(e),U(e))}(e),class:K(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:V((()=>[x(t,{class:"wd-drop-menu__item-title"},{default:V((()=>[x(t,{class:"wd-drop-menu__item-title-text"},{default:V((()=>[O(T(P(e)),1)])),_:2},1024),x(n,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),$(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}})),[["__scopeId","data-v-b41e9b4f"]]),be=oe(c({__name:"Index",setup(e){const{t:o}=A(),l=d(),a=m(),t=m(),n=m(30),u=m(1),s=m(0),i=m(0),c=m(0),p=m(0),v=m(0),f=m(0),g=m(0),b=m(0),w=m(0),h=m([{label:o("quan-bu-shang-pin"),value:0},{label:o("xin-kuan-shang-pin"),value:1,tip:o("zhe-shi-bu-chong-xin-xi")},{label:o("zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian-zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian"),value:2}]),$=m([{label:o("zong-he"),value:0},{label:o("xiao-liang"),value:1},{label:o("shang-jia-shi-jian"),value:2}]);function j(){var e;null==(e=t.value)||e.initSlider()}function C({value:e}){console.log(e)}function z({value:e}){console.log(e)}function K({value:e}){console.log(e)}function S({value:e}){console.log(e)}function I({value:e}){console.log(e)}function P({value:e}){console.log(e)}function U({value:e}){console.log(e)}function N({value:e}){console.log(e)}function q({value:e}){console.log(e)}function E(){a.value.close()}const B=({status:e,resolve:a})=>{l.confirm({title:`${o(e?"yi-bu-da-kai":"yi-bu-guan-bi")}`,msg:`${o(e?"que-ding-yao-da-kai-xia-la-cai-dan-ma":"que-ding-yao-guan-bi-xia-la-cai-dan-ma")}`}).then((()=>{a(!0)})).catch((()=>{a(!1)}))};return(e,o)=>{const l=F(M("wd-message-box"),r),d=k,m=F(M("wd-drop-menu-item"),fe),A=F(M("wd-drop-menu"),ge),H=F(M("demo-block"),ie),L=F(M("wd-slider"),de),Y=F(M("wd-cell"),D),G=F(M("wd-button"),re),J=F(M("wd-sort-button"),ce),X=F(M("page-wraper"),ue);return y(),_(X,null,{default:V((()=>[x(d,{onClick:o[0]||(o[0]=Q((()=>{}),["stop"]))},{default:V((()=>[x(l)])),_:1}),x(d,{class:"demo-body"},{default:V((()=>[x(H,{title:e.$t("jiBenYongFa"),transparent:""},{default:V((()=>[x(A,null,{default:V((()=>[x(m,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),options:h.value,onChange:C},null,8,["modelValue","options"]),x(m,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value=e),options:$.value,onChange:z},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),x(H,{title:e.$t("zi-ding-yi-cai-dan-nei-rong"),transparent:""},{default:V((()=>[x(A,null,{default:V((()=>[x(m,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),options:h.value,onChange:K},null,8,["modelValue","options"]),x(m,{ref_key:"dropMenu",ref:a,title:e.$t("shai-xuan"),onOpened:j},{default:V((()=>[x(d,null,{default:V((()=>[x(L,{modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value=e),ref_key:"slider",ref:t},null,8,["modelValue"]),x(Y,{title:e.$t("biao-ti-wen-zi-10"),value:e.$t("nei-rong")},null,8,["title","value"]),x(Y,{title:e.$t("biao-ti-wen-zi-10"),label:e.$t("miaoShuXinXi-0"),value:e.$t("nei-rong")},null,8,["title","label","value"]),x(d,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:V((()=>[x(G,{block:"",size:"large",onClick:E},{default:V((()=>[O(T(e.$t("zhu-yao-an-niu")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),x(H,{title:e.$t("zi-ding-yi-cai-dan-xuan-xiang"),transparent:""},{default:V((()=>[x(d,{class:"custom-menu"},{default:V((()=>[x(A,{"custom-style":"flex: 1; min-width: 0"},{default:V((()=>[x(m,{modelValue:c.value,"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e),options:h.value,onChange:S},null,8,["modelValue","options"])])),_:1}),x(d,{style:{flex:"1"}},{default:V((()=>[x(J,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),title:e.$t("shang-jia-shi-jian"),onChange:I},null,8,["modelValue","title"])])),_:1})])),_:1})])),_:1},8,["title"]),x(H,{title:e.$t("zi-ding-yi-cai-dan-tu-biao"),transparent:""},{default:V((()=>[x(A,null,{default:V((()=>[x(m,{title:e.$t("di-tu"),icon:"location","icon-size":"24px"},null,8,["title"])])),_:1})])),_:1},8,["title"]),x(H,{title:e.$t("yi-bu-da-kai-guan-bi"),transparent:""},{default:V((()=>[x(A,null,{default:V((()=>[x(m,{modelValue:w.value,"onUpdate:modelValue":o[7]||(o[7]=e=>w.value=e),options:h.value,onChange:C,"before-toggle":B},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),x(H,{title:e.$t("xiang-shang-dan-chu"),transparent:""},{default:V((()=>[x(A,{direction:"up"},{default:V((()=>[x(m,{modelValue:v.value,"onUpdate:modelValue":o[8]||(o[8]=e=>v.value=e),options:h.value,onChange:P,"custom-title":"custom-title","custom-icon":"custom-icon"},null,8,["modelValue","options"]),x(m,{modelValue:f.value,"onUpdate:modelValue":o[9]||(o[9]=e=>f.value=e),options:$.value,onChange:U},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),x(H,{title:e.$t("jinYong"),transparent:""},{default:V((()=>[x(A,{direction:"up"},{default:V((()=>[x(m,{modelValue:g.value,"onUpdate:modelValue":o[10]||(o[10]=e=>g.value=e),disabled:"",options:h.value,onChange:N},null,8,["modelValue","options"]),x(m,{modelValue:b.value,"onUpdate:modelValue":o[11]||(o[11]=e=>b.value=e),options:$.value,onChange:q},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-13f98ff8"]]);export{be as default};
