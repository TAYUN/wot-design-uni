var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,t=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,n=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&t(e,a,l[a]);if(s)for(var a of s(l))r.call(l,a)&&t(e,a,l[a]);return e},i=(e,s)=>l(e,a(s)),u=(e,l,a)=>new Promise(((s,o)=>{var r=e=>{try{n(a.next(e))}catch(l){o(l)}},t=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,t);n((a=a.apply(e,l)).next())}));import{d as c,ay as d,r as p,C as f,c as m,B as y,G as h,as as v,b as g,g as b,i as _,E as w,q as x,w as k,z as S,h as $,D as C,m as I,j,t as P,F as O,am as V,k as E,N as W}from"./index-Ddr6X_C9.js";import{a as q,c as T,f as B,d as z,m as L,b as A,w as F,_ as H}from"./base64.DGXTDNor.js";import{e as K,u as M,F as D}from"./wd-loading.CTKNgZO5.js";import{u as G}from"./useTranslate.zeM_cXdJ.js";const N=i(n({},A),{customInputClass:q(""),customLabelClass:q(""),placeholder:String,placeholderStyle:String,placeholderClass:q(""),cursorSpacing:L(0),cursor:L(-1),selectionStart:L(-1),selectionEnd:L(-1),adjustPosition:T(!0),holdKeyboard:T(!1),confirmType:q("done"),confirmHold:T(!1),focus:T(!1),type:q("text"),maxlength:{type:Number,default:-1},disabled:T(!1),alwaysEmbed:T(!1),alignRight:T(!1),modelValue:z(""),showPassword:T(!1),clearable:T(!1),readonly:T(!1),prefixIcon:String,suffixIcon:String,showWordLimit:T(!1),label:String,labelWidth:q(""),size:String,error:T(!1),center:T(!1),noBorder:T(!1),required:T(!1),prop:String,rules:B(),clearTrigger:q("always"),focusWhenClear:T(!0),ignoreCompositionEvent:T(!0),inputmode:q("text")}),R=H(c(i(n({},{name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:N,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:l}){const a=e,s=l,o=d(),{translate:r}=G("input"),t=p(!1),n=p(!1),i=p(!1),c=p(!1),q=p(function(){const e=function(e){const{maxlength:l}=a;if(y(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(a.modelValue);l=e,o=a.modelValue,v(String(l),String(o))||s("update:modelValue",e);var l,o;return e}()),T=K();f((()=>a.focus),(e=>{i.value=e}),{immediate:!0,deep:!0}),f((()=>a.modelValue),(e=>{q.value=y(e)?String(e):""}));const{parent:B}=M(D),z=m((()=>y(a.placeholder)?a.placeholder:r("placeholder"))),L=m((()=>{const{disabled:e,readonly:l,clearable:s,clearTrigger:o}=a;return!(!s||l||e||!q.value||!("always"===o||"focus"===a.clearTrigger&&c.value))})),A=m((()=>{const{disabled:e,readonly:l,maxlength:s,showWordLimit:o}=a;return Boolean(!e&&!l&&y(s)&&s>-1&&o)})),H=m((()=>B&&a.prop&&B.errorMessages&&B.errorMessages[a.prop]?B.errorMessages[a.prop]:"")),N=m((()=>{let e=!1;if(B&&B.props.rules){const l=B.props.rules;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&s===a.prop&&Array.isArray(l[s])&&(e=l[s].some((e=>e.required)))}return a.required||a.rules.some((e=>e.required))||e})),R=m((()=>`wd-input  ${a.label||o.label?"is-cell":""} ${a.center?"is-center":""} ${T.border.value?"is-border":""} ${a.size?"is-"+a.size:""} ${a.error?"is-error":""} ${a.disabled?"is-disabled":""}  ${q.value&&String(q.value).length>0?"is-not-empty":""}  ${a.noBorder?"is-no-border":""} ${a.customClass}`)),U=m((()=>`wd-input__label ${a.customLabelClass} ${N.value?"is-required":""}`)),J=m((()=>`wd-input__placeholder  ${a.placeholderClass}`)),Q=m((()=>a.labelWidth?h({"min-width":a.labelWidth,"max-width":a.labelWidth}):""));function X(){t.value=!t.value}function Y(){return u(this,null,(function*(){c.value=!1,q.value="",a.focusWhenClear&&(n.value=!0,i.value=!1),yield W(),a.focusWhenClear&&(i.value=!0,c.value=!0),s("update:modelValue",q.value),s("clear")}))}function Z(){return u(this,null,(function*(){yield W(150),n.value?n.value=!1:(c.value=!1,s("blur",{value:q.value}))}))}function ee({detail:e}){c.value=!0,s("focus",e)}function le({detail:e}){s("update:modelValue",q.value),s("input",e)}function ae({detail:e}){s("keyboardheightchange",e)}function se({detail:e}){s("confirm",e)}function oe(){s("clicksuffixicon")}function re(){s("clickprefixicon")}function te(e){s("click",e)}return(e,l)=>{const s=_,o=V,r=E;return b(),g(s,{class:x(R.value),style:w(e.customStyle),onClick:te},{default:k((()=>[e.label||e.$slots.label?(b(),g(s,{key:0,class:x(U.value),style:w(Q.value)},{default:k((()=>[e.prefixIcon||e.$slots.prefix?(b(),g(s,{key:0,class:"wd-input__prefix"},{default:k((()=>[e.prefixIcon&&!e.$slots.prefix?(b(),g(F,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:re},null,8,["name"])):C(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):S("",!0),$(s,{class:"wd-input__label-inner"},{default:k((()=>[e.label&&!e.$slots.label?(b(),I(O,{key:0},[j(P(e.label),1)],64)):C(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):S("",!0),$(s,{class:"wd-input__body"},{default:k((()=>[$(s,{class:"wd-input__value"},{default:k((()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?S("",!0):(b(),g(s,{key:0,class:"wd-input__prefix"},{default:k((()=>[e.prefixIcon&&!e.$slots.prefix?(b(),g(F,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:re},null,8,["name"])):C(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})),$(o,{class:x(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",A.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!t.value,modelValue:q.value,"onUpdate:modelValue":l[0]||(l[0]=e=>q.value=e),placeholder:z.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:i.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":J.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:le,onFocus:ee,onBlur:Z,onConfirm:se,onKeyboardheightchange:ae},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),a.readonly?(b(),g(s,{key:1,class:"wd-input__readonly-mask"})):S("",!0),L.value||e.showPassword||e.suffixIcon||A.value||e.$slots.suffix?(b(),g(s,{key:2,class:"wd-input__suffix"},{default:k((()=>[L.value?(b(),g(F,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:Y})):S("",!0),e.showPassword?(b(),g(F,{key:1,"custom-class":"wd-input__icon",name:t.value?"view":"eye-close",onClick:X},null,8,["name"])):S("",!0),A.value?(b(),g(s,{key:2,class:"wd-input__count"},{default:k((()=>[$(r,{class:x([q.value&&String(q.value).length>0?"wd-input__count-current":"",String(q.value).length>e.maxlength?"is-error":""])},{default:k((()=>[j(P(String(q.value).length),1)])),_:1},8,["class"]),j(" /"+P(e.maxlength),1)])),_:1})):S("",!0),e.suffixIcon&&!e.$slots.suffix?(b(),g(F,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:oe},null,8,["name"])):C(e.$slots,"suffix",{key:4},void 0,!0)])),_:3})):S("",!0)])),_:3}),H.value?(b(),g(s,{key:0,class:"wd-input__error-message"},{default:k((()=>[j(P(H.value),1)])),_:1})):S("",!0)])),_:3})])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-29f55521"]]);export{R as _};
