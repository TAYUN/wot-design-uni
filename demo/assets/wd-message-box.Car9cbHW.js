var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&l(e,o,t[o]);if(a)for(var o of a(t))n.call(t,o)&&l(e,o,t[o]);return e},i=(e,a)=>t(e,o(a));import{a3 as c,r as u,ae as p,ag as d,d as m,c as f,al as w,az as y,Q as b,B as h,C as _,b as x,g as C,w as g,h as B,i as P,q as v,z,j as V,t as k,m as E,D as O,F as T,l as j,aA as I,ad as M,R as S}from"./index-Ddr6X_C9.js";import{a as $}from"./wd-loading.CTKNgZO5.js";import{_ as R}from"./wd-button.C_ePM_xj.js";import{_ as N}from"./wd-input.Dh31V7z_.js";import{a as A,b as q,_ as D}from"./base64.DGXTDNor.js";import{u as G}from"./useTranslate.zeM_cXdJ.js";const U="__MESSAGE_OPTION__",F=Symbol("None"),H={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function Q(e=""){const t=e?U+e:U,o=c(t,u(F));o.value===F&&(o.value=H,d(t,o));const a=e=>t=>{const o=p({type:e},"string"==typeof t?{title:t}:t);return"confirm"===o.type||"prompt"===o.type?o.showCancelButton=!0:o.showCancelButton=!1,s(o)},s=e=>new Promise(((t,a)=>{const s=p(H,"string"==typeof e?{title:e}:e);o.value=p(s,{show:!0,success:e=>{i(),t(e)},fail:e=>{i(),a(e)}})})),n=a("alert"),l=a("confirm"),r=a("prompt"),i=()=>{o.value!==F&&(o.value.show=!1)};return{show:s,alert:n,confirm:l,prompt:r,close:i}}const J=i(r({},q),{selector:A("")}),K=D(m(i(r({},{name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:J,setup(e){const t=e,{translate:o}=G("message-box"),a=f((()=>`wd-message-box__container ${t.customClass}`)),s=f((()=>`wd-message-box__body ${i.title?"":"is-no-title"} ${"prompt"===i.type?"is-prompt":""}`)),n=(l=t.selector)?`${U}${l}`:U;var l;const r=c(n,u(H)),i=w({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),p=f((()=>{const e=y({block:!0},h(i.confirmButtonProps)?b(i.confirmButtonProps,S):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e})),d=f((()=>{const e=y({block:!0,type:"info"},h(i.cancelButtonProps)?b(i.cancelButtonProps,S):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e}));function m(e){if(("modal"!==e||i.closeOnClickModal)&&("prompt"!==i.type||"confirm"!==e||function(){if(i.inputPattern&&!i.inputPattern.test(String(i.inputValue)))return i.showErr=!0,!1;if("function"==typeof i.inputValidate){if(!i.inputValidate(i.inputValue))return i.showErr=!0,!1}return i.showErr=!1,!0}()))switch(e){case"confirm":i.beforeConfirm?i.beforeConfirm({resolve:t=>{t&&A({action:e,value:i.inputValue})}}):A({action:e,value:i.inputValue});break;case"cancel":q({action:e});break;default:q({action:"modal"})}}function A(e){i.show=!1,M(i.success)&&i.success(e)}function q(e){i.show=!1,M(i.fail)&&i.fail(e)}function D({value:e}){""!==e?i.inputValue=e:i.showErr=!1}return _((()=>r.value),(e=>{var t;(t=e)&&(i.title=h(t.title)?t.title:"",i.showCancelButton=!!h(t.showCancelButton)&&t.showCancelButton,i.show=t.show,i.closeOnClickModal=t.closeOnClickModal,i.confirmButtonText=t.confirmButtonText,i.cancelButtonText=t.cancelButtonText,i.msg=t.msg,i.type=t.type,i.inputType=t.inputType,i.inputSize=t.inputSize,i.inputValue=t.inputValue,i.inputPlaceholder=t.inputPlaceholder,i.inputPattern=t.inputPattern,i.inputValidate=t.inputValidate,i.success=t.success,i.fail=t.fail,i.beforeConfirm=t.beforeConfirm,i.inputError=t.inputError,i.showErr=t.showErr,i.zIndex=t.zIndex,i.lazyRender=t.lazyRender,i.confirmButtonProps=t.confirmButtonProps,i.cancelButtonProps=t.cancelButtonProps)}),{deep:!0,immediate:!0}),_((()=>i.show),(e=>{!1===!!e&&(i.showErr=!1)}),{deep:!0,immediate:!0}),(e,t)=>{const n=P;return C(),x(n,null,{default:g((()=>[B($,{transition:"zoom-in",modelValue:i.show,"onUpdate:modelValue":t[3]||(t[3]=e=>i.show=e),"close-on-click-modal":i.closeOnClickModal,"lazy-render":i.lazyRender,"custom-class":"wd-message-box",onClickModal:t[4]||(t[4]=e=>m("modal")),"z-index":i.zIndex,duration:200},{default:g((()=>[B(n,{class:v(a.value)},{default:g((()=>[B(n,{class:v(s.value)},{default:g((()=>[i.title?(C(),x(n,{key:0,class:"wd-message-box__title"},{default:g((()=>[V(k(i.title),1)])),_:1})):z("",!0),B(n,{class:"wd-message-box__content"},{default:g((()=>["prompt"===i.type?(C(),E(T,{key:0},[B(N,{modelValue:i.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.inputValue=e),type:i.inputType,size:i.inputSize,placeholder:i.inputPlaceholder,onInput:D},null,8,["modelValue","type","size","placeholder"]),i.showErr?(C(),x(n,{key:0,class:"wd-message-box__input-error"},{default:g((()=>[V(k(i.inputError||j(o)("inputNoValidate")),1)])),_:1})):z("",!0)],64)):z("",!0),O(e.$slots,"default",{},(()=>[V(k(i.msg),1)]),!0)])),_:3})])),_:3},8,["class"]),B(n,{class:v("wd-message-box__actions "+(i.showCancelButton?"wd-message-box__flex":"wd-message-box__block"))},{default:g((()=>[i.showCancelButton?(C(),x(R,I({key:0},d.value,{onClick:t[1]||(t[1]=e=>m("cancel"))}),{default:g((()=>[V(k(i.cancelButtonText||j(o)("cancel")),1)])),_:1},16)):z("",!0),B(R,I(p.value,{onClick:t[2]||(t[2]=e=>m("confirm"))}),{default:g((()=>[V(k(i.confirmButtonText||j(o)("confirm")),1)])),_:1},16)])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}})),[["__scopeId","data-v-662ca248"]]);export{K as _,Q as u};
